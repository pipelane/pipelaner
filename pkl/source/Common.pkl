@go.Package { name = "github.com/pipelane/pipelaner/gen/source/common" }
module com.pipelaner.source.common

import "package://pkg.pkl-lang.org/pkl-go/pkl.golang@0.8.1#/go.pkl"

typealias SASLMechanism = "SCRAM-SHA-512"|"SCRAM-SHA-256"|"PLAIN"

class Kafka {
  saslEnabled: Boolean
  saslMechanism: SASLMechanism = "PLAIN"
  saslUsername: String?
  saslPassword: String?
  brokers: String
  version: String?
  topics: Listing<String>
  schemaRegistry: String
}

class TLSConfig {
  certFile: String(isTLSKeyAndCertSetted)
  keyFile: String(isTLSKeyAndCertSetted)
  hidden isTLSKeyAndCertSetted = (_) ->
      if (keyFile == "" || certFile == "")
        throw("key and cert files required with enabled tls")
      else true
}

class Pipelaner {
  host: String = "localhost"
  port: Int
  tls: TLSConfig?
}